<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>toposs/signin</title>
    <link rel="shortcut icon" href="Icon Toposs.ico">
    <link rel="stylesheet" href="Beranda.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- header -->
        <div class="flex-column">
            <nav>
                <div class="flex-row">
                    <div class="header">
                        <img class="logo" src="Logo Toposs.png" alt="Logo">
                    </div>
                    <div class="search">
                        <form class="searchbox">
                            <input class="searchtext" type="text" placeholder="Search Disini...">
                            <a href="Find.html"><span class="material-symbols-outlined searchicon">search</span></a>
                        </form>
                    </div>
                    <div class="icon">
                        <a href="Saved.html">
                            <span class="material-symbols-outlined">favorite</span><br>
                            <span>Saved</span>
                        </a>
                    </div>
                    <div class="icon">
                        <a href="Cart.html">
                            <span class="material-symbols-outlined">shopping_cart</span><br>
                            <span>Cart</span>
                        </a>
                    </div>
                    <div class="icon" id="tablogin">
                        <a href="Login.html">
                            <span class="material-symbols-outlined">person</span><br>
                            <span>Sign In</span>
                        </a>
                    </div>
                    <div class="icon" id="profile" style="display: none;">
                        <div class="dropdown">
                            <button class="dropbtn">
                                <span class="material-symbols-outlined">account_box</span>
                                <span class="material-symbols-outlined">arrow_drop_down</span>
                            </button>
                            <div class="dropdown-content">
                                <a href="Myprofile.html">My Profile</a>
                                <hr>
                                <a href="Upload.html">Upload your artwork</a>
                                <a href="Earnings.html">My Earnings</a>
                                <a href="Published.html">Upload History</a>
                                <a href="Order.html">My Orders</a>
                                <a href="Settings.html">Account Settings</a>
                                <hr>
                                <a id="logout">Log Out</a>
                            </div>
                          </div> 
                    </div>
                </div>
            </nav>

            <!-- content -->
            <div class="flex-row">
                <div class="sign-in">
                    <table class="sign-in-content">
                        <tr>
                            <th><h1>Create an account</h1></th>
                        </tr>
                        <tr>
                            <th><span class="material-symbols-outlined">account_circle</span></th>
                        </tr>
                        <div id="asbutton">
                        <tr>
                            <th>
                                <div>as?pilih salah satu</div>
                                <div class="akun" id="customerbtn" onclick="produsen()">
                                    As Produsen
                                </div>
                                <div class="akun" id="customerbtn" onclick="customer()">
                                    As Customer
                                </div>
                            </div>
                            </th>
                        </tr>
                        </div>
                        <tr>
                            <th id="as"></th>
                        </tr>
                        <tr>
                            <td class="data">First Name / Nick</td>
                        </tr>
                        <tr>
                            <td class="frm-box">
                                <input class="frm" type="text" id="fname" name="fname">
                            </td>
                        </tr>
                        <tr>
                            <td class="data">Last Name</td>
                        </tr>
                        <tr>
                            <td class="frm-box">
                                <input class="frm" type="text" id="lname" name="lname">
                            </td>
                        </tr>
                        <tr>
                            <td class="data">E-mail</td>
                        </tr>
                        <tr>
                            <td class="frm-box">    
                                <input class="frm" type="email" id="email" name="lname">
                            </td>
                        </tr>
                        <tr>
                            <td class="data">Password</td>
                        </tr>
                        <tr>
                            <td class="frm-box">
                                <input class="frm" type="password" id="password" name="password">
                            </td>
                        </tr>
                        <tr>
                            <td class="data-cek">
                                <input type="checkbox" name="cek1" id="cek1" value="cek1"><label for="cek1">Accept everything</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="data-cek">
                                <input type="checkbox" name="cek2" id="cek2" value="cek2"><label for="cek2">I would like to receive e-mails with special offers and new products.</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="frm-box">
                                <button class="btn" type="submit" id="sighUp">Create an account</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="frm-box">
                                <a href="Login.html" target="_blank">I already have an account</a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div> 
    </div>
    <script>
        let asbutton = document.getElementById('asbutton');
        let customerbtn = document.getElementById('customerbtn');
        let as = document.getElementById('as');

        function produsen(){
            as.innerHTML = "Produsen";
        }

        function customer(){
            as.innerHTML = "Customer";
        }
    </script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";
        import { getDatabase, ref, set, push, get, child, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBtwsIft9BS24yfM0qAJ7VUBfE4rIXEdrM",
            authDomain: "tokoposter-59447.firebaseapp.com",
            projectId: "tokoposter-59447",
            storageBucket: "tokoposter-59447.appspot.com",
            messagingSenderId: "660302277836",
            appId: "1:660302277836:web:a607e85e507db70a682669"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth();
        
        sighUp.addEventListener('click',(e) => {

        let email = document.getElementById('email').value;
        let password = document.getElementById('password').value;
        let fname = document.getElementById('fname').value;
        let lname = document.getElementById('lname').value;
        let authen = document.getElementById('as').innerHTML;

        createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
        // Signed in 
            const user = userCredential.user;

            set(ref(database, 'users/' + user.uid),{
                email: email,
                password: password,
                fname: fname,
                lname: lname,
                authen: authen,
            })

            alert('Account created!');
            document.location.reload();
            document.location="Login.html"
            // ...
        })
        .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;

            alert(errorMessage);
        // ..
        });

        });
    
        const user = auth.currentUser;
        onAuthStateChanged(auth, (user) => {
        if (user) {
            // User is signed in, see docs for a list of available properties
            // https://firebase.google.com/docs/reference/js/firebase.User
            const uid = user.uid;
            //bla bla bla
            // ...
        } else {
            // User is signed out
            // ...
            //bla bla bla
        }
        });
      </script>
</body>
</html>